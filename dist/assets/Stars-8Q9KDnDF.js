import{o as P,r as e,_ as p,q as w,h as M,D as m,v as z,V as R,a as f,j as U,i as C,P as F}from"./index-CJ07m79o.js";const I=()=>parseInt(P.replace(/\D+/g,"")),v=I(),y=v>=154?"opaque_fragment":"output_fragment";class W extends w{constructor(t){super(t),this.onBeforeCompile=(r,o)=>{const{isWebGL2:a}=o.capabilities;r.fragmentShader=r.fragmentShader.replace(`#include <${y}>`,`
        ${a?`#include <${y}>`:`#extension GL_OES_standard_derivatives : enable
#include <${y}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${v>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const D=e.forwardRef((s,t)=>{const[r]=e.useState(()=>new W(null));return e.createElement("primitive",p({},s,{object:r,ref:t,attach:"material"}))});let l,d;const $=e.createContext(null),E=new z,S=new R,j=e.forwardRef(({children:s,range:t,limit:r=1e3,...o},a)=>{const n=e.useRef(null);e.useImperativeHandle(a,()=>n.current,[]);const[u,i]=e.useState([]),[[c,g,h]]=e.useState(()=>[new Float32Array(r*3),Float32Array.from({length:r*3},()=>1),Float32Array.from({length:r},()=>1)]);e.useEffect(()=>{n.current.geometry.attributes.position.needsUpdate=!0}),M(()=>{for(n.current.updateMatrix(),n.current.updateMatrixWorld(),E.copy(n.current.matrixWorld).invert(),n.current.geometry.drawRange.count=Math.min(r,t!==void 0?t:r,u.length),l=0;l<u.length;l++)d=u[l].current,d.getWorldPosition(S).applyMatrix4(E),S.toArray(c,l*3),n.current.geometry.attributes.position.needsUpdate=!0,d.matrixWorldNeedsUpdate=!0,d.color.toArray(g,l*3),n.current.geometry.attributes.color.needsUpdate=!0,h.set([d.size],l),n.current.geometry.attributes.size.needsUpdate=!0});const A=e.useMemo(()=>({getParent:()=>n,subscribe:x=>(i(b=>[...b,x]),()=>i(b=>b.filter(_=>_.current!==x.current)))}),[]);return e.createElement("points",p({userData:{instances:u},matrixAutoUpdate:!1,ref:n,raycast:()=>null},o),e.createElement("bufferGeometry",null,e.createElement("bufferAttribute",{attach:"attributes-position",count:c.length/3,array:c,itemSize:3,usage:m}),e.createElement("bufferAttribute",{attach:"attributes-color",count:g.length/3,array:g,itemSize:3,usage:m}),e.createElement("bufferAttribute",{attach:"attributes-size",count:h.length,array:h,itemSize:1,usage:m})),e.createElement($.Provider,{value:A},s))}),G=e.forwardRef(({children:s,positions:t,colors:r,sizes:o,stride:a=3,...n},u)=>{const i=e.useRef(null);return e.useImperativeHandle(u,()=>i.current,[]),M(()=>{const c=i.current.geometry.attributes;c.position.needsUpdate=!0,r&&(c.color.needsUpdate=!0),o&&(c.size.needsUpdate=!0)}),e.createElement("points",p({ref:i},n),e.createElement("bufferGeometry",null,e.createElement("bufferAttribute",{attach:"attributes-position",count:t.length/a,array:t,itemSize:a,usage:m}),r&&e.createElement("bufferAttribute",{attach:"attributes-color",count:r.length/a,array:r,itemSize:3,usage:m}),o&&e.createElement("bufferAttribute",{attach:"attributes-size",count:o.length/a,array:o,itemSize:1,usage:m})),s)}),V=e.forwardRef((s,t)=>s.positions instanceof Float32Array?e.createElement(G,p({},s,{ref:t})):e.createElement(j,p({},s,{ref:t}))),k=s=>{const t=e.useRef(),[r]=e.useState(()=>{const o=new Float32Array(10500);for(let a=0;a<o.length;a+=3){const n=1.2*Math.cbrt(Math.random()),u=Math.random()*2*Math.PI,i=Math.acos(2*Math.random()-1);o[a]=n*Math.sin(i)*Math.cos(u),o[a+1]=n*Math.sin(i)*Math.sin(u),o[a+2]=n*Math.cos(i)}return o});return M((o,a)=>{t.current&&(t.current.rotation.x-=a*.03,t.current.rotation.y-=a*.03)}),f("group",{rotation:[0,0,Math.PI/4],children:f(V,{ref:t,positions:r,stride:3,frustumCulled:!1,...s,children:f(D,{transparent:!0,color:"#f272c8",size:.001,sizeAttenuation:!0,depthWrite:!1})})})},N=()=>f("div",{className:"w-full h-auto absolute inset-0 z-[-1]",children:U(C,{camera:{position:[0,0,1]},gl:{antialias:!0},children:[f(e.Suspense,{fallback:null,children:f(k,{})}),f(F,{all:!0})]})});export{N as default};
